{"version":3,"sources":["webpack:///./src/views/components/JobCustomAddEditDetail/index.vue?c498","webpack:///src/views/components/JobCustomAddEditDetail/index.vue","webpack:///./src/views/components/JobCustomAddEditDetail/index.vue?7fb0","webpack:///./src/views/components/JobCustomAddEditDetail/index.vue","webpack:///./src/api/job.js","webpack:///./src/api/helper.js","webpack:///./src/api/inst.js","webpack:///./src/views/inst/list/index.vue?3ceb","webpack:///src/views/inst/list/index.vue","webpack:///./src/views/inst/list/index.vue?18f6","webpack:///./src/views/inst/list/index.vue","webpack:///./src/views/inst/list/index.vue?40da"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","usageModeHelper","title","subTitle","on","$router","go","slot","directives","name","rawName","value","data","expression","style","color","includes","lastStatus","_v","_s","lastStatusDesc","authMap","start","onStart","stop","onStop","edit","onEdit","onDetail","delete","onDelete","onGoBack","handleTabChange","key","isLoading","ref","rules","labelCol","wrapperCol","model","callback","$$v","$set","_l","helper","item","index","desc","flinkConfig","jobUploadJarUrl","handleJarUploadChange","span","offset","onAdd","onUpdate","onRest","dataId","staticRenderFns","components","InstList","props","usageMode","default","computed","job","watch","deep","handler","description","id","type","statusDesc","clientVersion","jarName","mainClass","args","parallelism","restart","showPassword","showAddButton","showStartButton","showStopButton","showUpdateButton","showEditButton","showDetailButton","showDeleteButton","showRest","jobTypeList","jobJarList","jobClientVersionList","dataTimer","methods","$refs","ruleForm","validate","valid","path","query","jobId","resp","push","handleFlush","checked","getDataTimer","clearDataTimer","setInterval","clearInterval","info","file","status","$message","success","getJobUploadJarList","error","activeKey","refInstList","clearDataListTimer","initAddUsageModel","initEditUsageModel","initDetailUsageModel","getData","initHelper","initUsageModel","beforeDestroy","init","created","component","UPLOAD_JAR_URL","getJobPageList","filter","request","url","method","params","addJob","getJob","updateJob","deleteJob","deleteJobList","idList","getJobJarList","replace","startJob","startJobList","restartJob","restartJobList","stopJob","stopJobList","getJobStateInfoList","getInstStatusList","getJobTypeList","getJobClientVersionList","getJobStateInfoType","getDefaultFlinkConfs","getInstPageList","getInstLog","staticClass","dataFilter","getDataList","handleDataListFlush","onQuery","dataColumnList","dataList","x","scopedSlots","_u","fn","current","row","typeDesc","uiAddress","$event","onLog","page","total","range","onPageNumChange","onPageSizeChange","clientWidth","handleInstLogModalOk","handleInstLogModalCancel","instLog","SqlCMEditor","isAutoFlush","pageNum","pageSize","dataTableSelectedRowKeys","isVisible","timer","dataListTimer","instStatusList","document","documentElement","onDataTableSelectedChange","selectedRowKeys","inst","lastInst","clearInstLogTimer","getDataListTimer","handleInstLogFlush","getInstLogTimer"],"mappings":"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","file":"js/chunk-70a86898.5f2804f9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('a-page-header',{staticStyle:{\"padding\":\"5px 5px 0 5px\"},attrs:{\"title\":_vm.usageModeHelper.title,\"sub-title\":_vm.usageModeHelper.subTitle},on:{\"back\":function () { return _vm.$router.go(-1); }}},[_c('template',{slot:\"tags\"},[_c('a-tag',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.data.lastStatusDesc),expression:\"data.lastStatusDesc\"}],style:({ color: [3, 4, -1].includes(_vm.data.lastStatus) ? 'red' : 'green' })},[_vm._v(_vm._s(_vm.data.lastStatusDesc))])],1),_c('template',{slot:\"extra\"},[_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.usageModeHelper.showStartButton),expression:\"usageModeHelper.showStartButton\"}],staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":!_vm.data.authMap.start},on:{\"click\":_vm.onStart}},[_vm._v(\"启动\")]),_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.usageModeHelper.showStopButton),expression:\"usageModeHelper.showStopButton\"}],staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"danger\",\"size\":\"small\",\"disabled\":!_vm.data.authMap.stop},on:{\"click\":_vm.onStop}},[_vm._v(\"停止\")]),_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.usageModeHelper.showEditButton),expression:\"usageModeHelper.showEditButton\"}],staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":!_vm.data.authMap.edit},on:{\"click\":_vm.onEdit}},[_vm._v(\"编辑\")]),_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.usageModeHelper.showDetailButton),expression:\"usageModeHelper.showDetailButton\"}],staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.onDetail}},[_vm._v(\"详情\")]),_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.usageModeHelper.showDeleteButton),expression:\"usageModeHelper.showDeleteButton\"}],staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"danger\",\"size\":\"small\",\"disabled\":!_vm.data.authMap.delete},on:{\"click\":_vm.onDelete}},[_vm._v(\"删除\")]),_c('a-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.onGoBack}},[_vm._v(\"返回\")])],1)],2)],1),_c('a-tabs',{attrs:{\"default-active-key\":\"1\"},on:{\"change\":_vm.handleTabChange}},[_c('a-tab-pane',{key:\"job\"},[_c('span',{attrs:{\"slot\":\"tab\"},slot:\"tab\"},[_c('a-icon',{attrs:{\"type\":\"file-text\"}}),_vm._v(\" 作业信息 \")],1),_c('a-spin',{attrs:{\"spinning\":_vm.usageModeHelper.isLoading,\"size\":\"large\"}},[_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('h2',[_vm._v(\"基本配置\")]),_c('a-form-model',{ref:\"ruleForm\",attrs:{\"model\":_vm.data,\"rules\":_vm.rules,\"label-col\":_vm.labelCol,\"wrapper-col\":_vm.wrapperCol}},[_c('a-form-model-item',{attrs:{\"label\":\"作业名称\",\"prop\":\"name\"}},[_c('a-input',{model:{value:(_vm.data.name),callback:function ($$v) {_vm.$set(_vm.data, \"name\", $$v)},expression:\"data.name\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"作业类型\",\"prop\":\"type\"}},[_c('a-select',{attrs:{\"placeholder\":\"请选择作业类型\",\"disabled\":\"\"},model:{value:(_vm.data.type),callback:function ($$v) {_vm.$set(_vm.data, \"type\", $$v)},expression:\"data.type\"}},_vm._l((_vm.helper.jobTypeList),function(item,index){return _c('a-select-option',{key:index,attrs:{\"value\":item.value}},[_vm._v(\" \"+_vm._s(item.desc)+\" \")])}),1)],1),_c('a-form-model-item',{attrs:{\"label\":\"作业描述\"}},[_c('a-textarea',{model:{value:(_vm.data.description),callback:function ($$v) {_vm.$set(_vm.data, \"description\", $$v)},expression:\"data.description\"}})],1),_c('H2',[_vm._v(\"作业配置\")]),_c('a-form-model-item',{attrs:{\"label\":\"客户端版本\",\"prop\":\"clientVersion\"}},[_c('a-select',{attrs:{\"placeholder\":\"请选择版本\"},model:{value:(_vm.data.clientVersion),callback:function ($$v) {_vm.$set(_vm.data, \"clientVersion\", $$v)},expression:\"data.clientVersion\"}},_vm._l((_vm.helper.jobClientVersionList),function(item,index){return _c('a-select-option',{key:index,attrs:{\"value\":item.value}},[_vm._v(\" \"+_vm._s(item.desc)+\" \")])}),1)],1),_c('a-form-model-item',{attrs:{\"label\":\"执行文件\",\"prop\":\"configJarName\"}},[_c('a-select',{attrs:{\"placeholder\":\"请选择文件\"},model:{value:(_vm.data.flinkConfig.jarName),callback:function ($$v) {_vm.$set(_vm.data.flinkConfig, \"jarName\", $$v)},expression:\"data.flinkConfig.jarName\"}},_vm._l((_vm.helper.jobJarList),function(item,index){return _c('a-select-option',{key:index,attrs:{\"value\":item}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),1),_c('a-upload',{attrs:{\"name\":\"file\",\"action\":_vm.jobUploadJarUrl},on:{\"change\":_vm.handleJarUploadChange}},[_c('a-button',[_c('a-icon',{attrs:{\"type\":\"upload\"}}),_vm._v(\" 点击上传文件 \")],1)],1)],1),_c('a-form-model-item',{attrs:{\"label\":\"MainClass\",\"prop\":\"configMainClass\"}},[_c('a-input',{model:{value:(_vm.data.flinkConfig.mainClass),callback:function ($$v) {_vm.$set(_vm.data.flinkConfig, \"mainClass\", $$v)},expression:\"data.flinkConfig.mainClass\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"程序参数\",\"prop\":\"configArgs\"}},[_c('a-textarea',{model:{value:(_vm.data.flinkConfig.args),callback:function ($$v) {_vm.$set(_vm.data.flinkConfig, \"args\", $$v)},expression:\"data.flinkConfig.args\"}})],1),_c('H2',[_vm._v(\"运行参数\")]),_c('a-form-model-item',{attrs:{\"label\":\"作业并行度\",\"prop\":\"configParallelism\"}},[_c('a-input-number',{attrs:{\"min\":1},model:{value:(_vm.data.flinkConfig.parallelism),callback:function ($$v) {_vm.$set(_vm.data.flinkConfig, \"parallelism\", $$v)},expression:\"data.flinkConfig.parallelism\"}})],1),_c('a-form-model-item',{attrs:{\"wrapper-col\":{ span: _vm.wrapperCol.span, offset: _vm.labelCol.span }}},[_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.usageModeHelper.showAddButton),expression:\"usageModeHelper.showAddButton\"}],attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onAdd}},[_vm._v(\" 新建 \")]),_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.usageModeHelper.showUpdateButton),expression:\"usageModeHelper.showUpdateButton\"}],attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onUpdate}},[_vm._v(\" 更新 \")]),_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.usageModeHelper.showRest),expression:\"usageModeHelper.showRest\"}],staticStyle:{\"margin-left\":\"10px\"},on:{\"click\":_vm.onRest}},[_vm._v(\" 清空 \")])],1)],1)],1)])],1),_c('a-tab-pane',{key:\"instList\"},[_c('span',{attrs:{\"slot\":\"tab\"},slot:\"tab\"},[_c('a-icon',{attrs:{\"type\":\"database\"}}),_vm._v(\" 实例列表 \")],1),_c('InstList',{ref:\"refInstList\",attrs:{\"job-id\":_vm.dataId,\"is-auto-flush\":true}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- Page Header -->\n    <div>\n      <a-page-header style=\"padding: 5px 5px 0 5px\" :title=\"usageModeHelper.title\" :sub-title=\"usageModeHelper.subTitle\" @back=\"() => $router.go(-1)\">\n        <template slot=\"tags\">\n          <a-tag :style=\"{ color: [3, 4, -1].includes(data.lastStatus) ? 'red' : 'green' }\" v-show=\"data.lastStatusDesc\">{{ data.lastStatusDesc }}</a-tag>\n        </template>\n        <template slot=\"extra\">\n          <a-button type=\"primary\" size=\"small\" v-show=\"usageModeHelper.showStartButton\" style=\"margin-right: 5px\" @click=\"onStart\" :disabled=\"!data.authMap.start\">启动</a-button>\n          <a-button type=\"danger\" size=\"small\" v-show=\"usageModeHelper.showStopButton\" style=\"margin-right: 5px\" @click=\"onStop\" :disabled=\"!data.authMap.stop\">停止</a-button>\n          <a-button type=\"primary\" size=\"small\" v-show=\"usageModeHelper.showEditButton\" style=\"margin-right: 5px\" @click=\"onEdit\" :disabled=\"!data.authMap.edit\">编辑</a-button>\n          <a-button type=\"primary\" size=\"small\" v-show=\"usageModeHelper.showDetailButton\" style=\"margin-right: 5px\" @click=\"onDetail\">详情</a-button>\n          <a-button type=\"danger\" size=\"small\" v-show=\"usageModeHelper.showDeleteButton\" style=\"margin-right: 5px\" @click=\"onDelete\" :disabled=\"!data.authMap.delete\">删除</a-button>\n          <a-button type=\"primary\" size=\"small\" @click=\"onGoBack\">返回</a-button>\n        </template>\n      </a-page-header>\n    </div>\n\n    <!-- Page Content -->\n    <a-tabs default-active-key=\"1\" @change=\"handleTabChange\">\n      <a-tab-pane key=\"job\">\n        <span slot=\"tab\">\n          <a-icon type=\"file-text\" />\n          作业信息\n        </span>\n\n        <!-- 作业信息 -->\n        <a-spin :spinning=\"usageModeHelper.isLoading\" size=\"large\">\n          <div style=\"margin-top: 20px\">\n            <h2>基本配置</h2>\n            <a-form-model ref=\"ruleForm\" :model=\"data\" :rules=\"rules\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\n              <a-form-model-item label=\"作业名称\" prop=\"name\">\n                <a-input v-model=\"data.name\" />\n              </a-form-model-item>\n              <a-form-model-item label=\"作业类型\" prop=\"type\">\n                <a-select v-model=\"data.type\" placeholder=\"请选择作业类型\" disabled>\n                  <a-select-option v-for=\"(item, index) in helper.jobTypeList\" :key=\"index\" :value=\"item.value\">\n                    {{ item.desc }}\n                  </a-select-option>\n                </a-select>\n              </a-form-model-item>\n              <a-form-model-item label=\"作业描述\">\n                <a-textarea v-model=\"data.description\" />\n              </a-form-model-item>\n\n              <H2>作业配置</H2>\n              <a-form-model-item label=\"客户端版本\" prop=\"clientVersion\">\n                <a-select v-model=\"data.clientVersion\" placeholder=\"请选择版本\">\n                  <a-select-option v-for=\"(item, index) in helper.jobClientVersionList\" :key=\"index\" :value=\"item.value\">\n                    {{ item.desc }}\n                  </a-select-option>\n                </a-select>\n              </a-form-model-item>\n              <!-- 执行文件还没有 -->\n              <a-form-model-item label=\"执行文件\" prop=\"configJarName\">\n                <a-select v-model=\"data.flinkConfig.jarName\" placeholder=\"请选择文件\">\n                  <a-select-option v-for=\"(item, index) in helper.jobJarList\" :key=\"index\" :value=\"item\">\n                    {{ item }}\n                  </a-select-option>\n                </a-select>\n\n                <!-- 上传文件的作业件 -->\n                <a-upload name=\"file\" :action=\"jobUploadJarUrl\" @change=\"handleJarUploadChange\">\n                  <a-button> <a-icon type=\"upload\" /> 点击上传文件 </a-button>\n                </a-upload>\n              </a-form-model-item>\n              <a-form-model-item label=\"MainClass\" prop=\"configMainClass\">\n                <a-input v-model=\"data.flinkConfig.mainClass\" />\n              </a-form-model-item>\n              <a-form-model-item label=\"程序参数\" prop=\"configArgs\">\n                <a-textarea v-model=\"data.flinkConfig.args\" />\n              </a-form-model-item>\n\n              <H2>运行参数</H2>\n              <a-form-model-item label=\"作业并行度\" prop=\"configParallelism\">\n                <a-input-number v-model=\"data.flinkConfig.parallelism\" :min=\"1\" />\n              </a-form-model-item>\n\n              <a-form-model-item :wrapper-col=\"{ span: wrapperCol.span, offset: labelCol.span }\">\n                <a-button type=\"primary\" @click=\"onAdd\" v-show=\"usageModeHelper.showAddButton\">\n                  新建\n                </a-button>\n                <a-button type=\"primary\" @click=\"onUpdate\" v-show=\"usageModeHelper.showUpdateButton\">\n                  更新\n                </a-button>\n                <a-button style=\"margin-left: 10px;\" @click=\"onRest\" v-show=\"usageModeHelper.showRest\">\n                  清空\n                </a-button>\n              </a-form-model-item>\n            </a-form-model>\n          </div>\n        </a-spin>\n      </a-tab-pane>\n\n      <a-tab-pane key=\"instList\">\n        <span slot=\"tab\">\n          <a-icon type=\"database\" />\n          实例列表\n        </span>\n\n        <InstList ref=\"refInstList\" :job-id=\"dataId\" :is-auto-flush=\"true\" />\n      </a-tab-pane>\n    </a-tabs>\n  </div>\n</template>\n\n<script>\nimport * as jobApi from \"@/api/job\";\nimport * as helperApi from \"@/api/helper\";\nimport InstList from \"@/views/inst/list\";\nexport default {\n  name: \"JobCustomAddEditDetail\",\n  components: {\n    InstList\n  },\n  props: {\n    // 使用模式\n    usageMode: {\n      default: \"\" // add | edit | update\n    },\n    dataId: {\n      default: -1\n    }\n  },\n  computed: {\n    jobUploadJarUrl: function() {\n      return jobApi.UPLOAD_JAR_URL.replace(\"{jobId}\", this.dataId);\n    }\n  },\n  watch: {\n    data: {\n      deep: true,\n      handler() {\n        if (this.usageMode === \"edit\" || this.usageMode === \"detail\") {\n          this.usageModeHelper.title = this.data.name;\n          this.usageModeHelper.subTitle = this.data.description;\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      labelCol: { span: 4 },\n      wrapperCol: { span: 16 },\n      data: {\n        id: null,\n        name: \"\",\n        type: 1,\n        lastStatus: null,\n        statusDesc: \"\",\n        clientVersion: \"\",\n        flinkConfig: {\n          jarName: \"\",\n          mainClass: \"\",\n          args: \"\",\n          parallelism: 1\n        },\n        authMap: {\n          edit: false,\n          delete: false,\n          start: false,\n          stop: false,\n          restart: false\n        }\n      },\n      rules: {\n        name: [{ required: true, message: \"请输入作业名！\", trigger: \"blur\" }]\n\n        // 下拉框的校验规则，对面里面还有子对象的规则，未直接生效，后续看看怎么弄\n        // type: [{ required: true, message: \"请选择类型！\", trigger: \"blur\" }],\n        // clientVersion: [{ required: true, message: \"请选择客户端版本！\", trigger: \"blur\" }],\n        // configJarName: [{ required: true, message: \"请选择执行文件！\", trigger: \"blur\" }],\n        // configMainClass: [{ required: true, message: \"请输入 Java Main Class！\", trigger: \"blur\" }]\n      },\n      usageModeHelper: {\n        showPassword: false,\n        showAddButton: false,\n        showStartButton: false,\n        showStopButton: false,\n        showUpdateButton: false,\n        showEditButton: false,\n        showDetailButton: false,\n        showDeleteButton: false,\n        showRest: true,\n        isLoading: false,\n        title: \"\",\n        subTitle: \"\"\n      },\n\n      // helper\n      helper: {\n        jobTypeList: [],\n        jobJarList: [],\n        jobClientVersionList: []\n      },\n      dataTimer: null\n    };\n  },\n  methods: {\n    onAdd() {\n      this.$refs.ruleForm.validate(valid => {\n        if (valid) {\n          jobApi.addJob(this.data).then(resp => {\n            this.$router.push({\n              path: \"/job/jobDetail\",\n              query: {\n                jobId: resp.data.id\n              }\n            });\n            this.$Notice.success({\n              title: \"新建作业成功！\"\n            });\n          });\n        } else {\n          this.$message.error(\"请检查必填项！！！\");\n          return false;\n        }\n      });\n    },\n    onUpdate() {\n      this.$refs.ruleForm.validate(valid => {\n        if (valid) {\n          jobApi.updateJob(this.data).then(() => {\n            this.$router.push({\n              path: \"/job/jobDetail\",\n              query: {\n                jobId: this.data.id\n              }\n            });\n            this.$Notice.success({\n              title: \"更新作业成功！\"\n            });\n          });\n        } else {\n          this.$message.error(\"请检查必填项\");\n          return false;\n        }\n      });\n    },\n    onEdit() {\n      this.$router.push({\n        path: \"/page/job/jobEdit\",\n        query: {\n          jobId: this.data.id\n        }\n      });\n    },\n    onDetail() {\n      this.$router.push({\n        path: \"/page/job/jobDetail\",\n        query: {\n          jobId: this.data.id\n        }\n      });\n    },\n    onDelete() {\n      jobApi.deleteJob(this.data.id).then(() => {\n        this.$Notice.success({\n          title: \"删除作业成功！\"\n        });\n        this.$router.push({\n          path: \"/page/job/jobList\"\n        });\n      });\n    },\n    onStart() {\n      jobApi.startJob(this.data.id).then(() => {\n        this.$Notice.success({\n          title: \"启动作业成功！\"\n        });\n        this.handleFlush(true);\n      });\n    },\n    onStop() {\n      jobApi.stopJob(this.data.id).then(() => {\n        this.$Notice.success({\n          title: \"停止作业成功！\"\n        });\n        this.getData();\n      });\n    },\n    /* 定时器自动刷新 */\n    handleFlush(checked) {\n      if (checked) {\n        if (!this.dataTimer) {\n          this.dataTimer = this.getDataTimer();\n        }\n      } else {\n        this.clearDataTimer();\n      }\n    },\n    getDataTimer() {\n      return setInterval(() => {\n        this.getData();\n      }, 1000);\n    },\n    clearDataTimer() {\n      clearInterval(this.dataTimer);\n      this.dataTimer = null;\n    },\n    onRest() {\n      this.data = {};\n    },\n    handleJarUploadChange(info) {\n      if (info.file.status === \"done\") {\n        this.$message.success(`${info.file.name} 上传成功！`);\n\n        this.getJobUploadJarList();\n      } else if (info.file.status === \"error\") {\n        this.$message.error(`${info.file.name} 上传失败！`);\n      }\n    },\n    onGoBack() {\n      this.$router.go(-1);\n    },\n    handleTabChange(activeKey) {\n      if (activeKey !== \"instList\") {\n        // 实例列表清除定时器\n        if (this.$refs.refInstList) {\n          this.$refs.refInstList.clearDataListTimer();\n        }\n      }\n    },\n    initAddUsageModel() {\n      this.usageModeHelper.showAddButton = true;\n      this.usageModeHelper.showUpdateButton = false;\n      this.usageModeHelper.showPassword = true;\n      this.usageModeHelper.title = \"新建作业\";\n      this.usageModeHelper.subTitle = \"请仔细核对作业信息哟！\";\n    },\n    initEditUsageModel() {\n      this.usageModeHelper.isLoading = true;\n      this.usageModeHelper.showAddButton = false;\n      this.usageModeHelper.showUpdateButton = true;\n      this.usageModeHelper.showPassword = true;\n      this.usageModeHelper.showPassword = true;\n      this.usageModeHelper.showDetailButton = true;\n      this.usageModeHelper.showStartButton = false;\n      this.usageModeHelper.showStopButton = false;\n      this.usageModeHelper.title = \"编辑作业\";\n      this.usageModeHelper.subTitle = \"请仔细核对作业信息哟！\";\n    },\n    initDetailUsageModel() {\n      this.usageModeHelper.showAddButton = false;\n      this.usageModeHelper.showUpdateButton = false;\n      this.usageModeHelper.showPassword = false;\n      this.usageModeHelper.showRest = false;\n      this.usageModeHelper.showEditButton = true;\n      this.usageModeHelper.showDeleteButton = true;\n      this.usageModeHelper.showStartButton = true;\n      this.usageModeHelper.showStopButton = true;\n      this.usageModeHelper.title = \"作业详情\";\n      this.usageModeHelper.subTitle = \"请仔细核对作业信息哟！\";\n    },\n    getData() {\n      this.usageModeHelper.isLoading = true;\n      // 根据 ID 获取数据详情\n      jobApi.getJob(this.dataId).then(resp => {\n        this.usageModeHelper.isLoading = false;\n        this.data = resp.data;\n\n        // 最终状态清除定时器\n        if ([3, 4, 5, 6].includes(this.data.lastStatus)) {\n          this.clearDataTimer();\n        }\n      });\n    },\n    getJobUploadJarList() {\n      jobApi.getJobJarList(this.dataId).then(resp => {\n        this.helper.jobJarList = resp.data;\n      });\n    },\n    initHelper() {\n      helperApi.getJobTypeList().then(resp => {\n        this.helper.jobTypeList = resp.data;\n      });\n      helperApi.getJobClientVersionList().then(resp => {\n        this.helper.jobClientVersionList = resp.data;\n      });\n      this.getJobUploadJarList();\n    },\n    initUsageModel() {\n      // 使用模式\n      switch (this.usageMode) {\n        case \"add\":\n          this.initAddUsageModel();\n          break;\n        case \"edit\":\n          this.getData();\n          this.initEditUsageModel();\n          break;\n        case \"detail\":\n          this.getData();\n          this.initDetailUsageModel();\n          break;\n      }\n    },\n    beforeDestroy() {\n      this.clearDataTimer();\n    },\n    init() {\n      this.initHelper();\n      this.initUsageModel();\n    }\n  },\n  created() {\n    this.init();\n  }\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=515059ea&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"515059ea\",\n  null\n  \n)\n\nexport default component.exports","import request from \"@/utils/request\";\n\n// 上传 Jar 的 URL\nexport const UPLOAD_JAR_URL = \"/mng/job/{jobId}/uploadJar\";\n\n/************** 作业相关 ********************/\nexport function getJobPageList(filter) {\n  return request({\n    url: \"/mng/job/queryJobs\",\n    method: \"get\",\n    params: filter\n  });\n}\n\n/*export function getJobList(filter) {\n  return request({\n    url: \"/mng/job/getJobList\",\n    method: \"get\",\n    params: filter\n  });\n}*/\n\nexport function addJob(data) {\n  return request({\n    url: \"/mng/job/addJob\",\n    method: \"post\",\n    data: data\n  });\n}\n\nexport function getJob(jobId) {\n  return request({\n    url: \"/mng/job/queryJob/\" + jobId,\n    method: \"get\"\n  });\n}\n\nexport function updateJob(data) {\n  return request({\n    url: \"/mng/job/updateJob\",\n    method: \"post\",\n    data: data\n  });\n}\n\nexport function deleteJob(jobId) {\n  return request({\n    url: \"/mng/job/deleteJob/\" + jobId,\n    method: \"post\"\n  });\n}\n\nexport function deleteJobList(idList) {\n  return request({\n    url: \"/mng/job/deleteJobs\",\n    method: \"post\",\n    data: idList\n  });\n}\n\nexport function getJobJarList(jobId) {\n  return request({\n    url: \"/mng/job/{jobId}/jarList\".replace(\"{jobId}\", jobId),\n    method: \"get\"\n  });\n}\n\nexport function startJob(jobId) {\n  return request({\n    url: \"/mng/job/startJob/{jobId}\".replace(\"{jobId}\", jobId),\n    method: \"get\"\n  });\n}\n\nexport function startJobList(idList) {\n  return request({\n    url: \"/mng/job/startJobs\",\n    method: \"post\",\n    data: idList\n  });\n}\n\nexport function restartJob(jobId) {\n  return request({\n    url: \"/mng/job/reStartJob/{jobId}\".replace(\"{jobId}\", jobId),\n    method: \"get\"\n  });\n}\n\nexport function restartJobList(idList) {\n  return request({\n    url: \"/mng/job/reStartJobs\",\n    method: \"post\",\n    data: idList\n  });\n}\n\nexport function stopJob(jobId) {\n  return request({\n    url: \"/mng/job/stopJob/{jobId}\".replace(\"{jobId}\", jobId),\n    method: \"get\"\n  });\n}\n\nexport function stopJobList(idList) {\n  return request({\n    url: \"/mng/job/stopJobs\",\n    method: \"post\",\n    data: idList\n  });\n}\n\nexport function getJobStateInfoList(params) {\n  return request({\n    url: \"/mng/jobStateInfo/queryJobStateInfos\",\n    method: \"get\",\n    params: params\n  });\n}\n","import request from \"@/utils/request\";\n\n/************** Helper 相关 ********************/\nexport function getInstStatusList() {\n  return request({\n    url: \"/mng/enum/jobInstanceStatus\",\n    method: \"get\"\n  });\n}\n\nexport function getJobTypeList() {\n  return request({\n    url: \"/mng/enum/jobType\",\n    method: \"get\"\n  });\n}\n\nexport function getJobClientVersionList() {\n  return request({\n    url: \"/mng/enum/jobClientVersion\",\n    method: \"get\"\n  });\n}\n\nexport function getJobStateInfoType() {\n  return request({\n    url: \"/mng/enum/jobStateInfoType\",\n    method: \"get\"\n  });\n}\n\nexport function getDefaultFlinkConfs() {\n  return request({\n    url: \"/mng/util/defaultFlinkConfs\",\n    method: \"get\"\n  });\n}\n","import request from \"@/utils/request\";\n\n/************** 实例相关 ********************/\nexport function getInstPageList(filter) {\n  return request({\n    url: \"/mng/jobInstance/queryJobInstances\",\n    method: \"get\",\n    params: filter\n  });\n}\n\nexport function getInstLog(id) {\n  return request({\n    url: \"/mng/jobInstance/startLog/\" + id,\n    method: \"get\"\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"margin-bottom\":\"10px\",\"padding\":\"5px\",\"background-image\":\"linear-gradient(100deg, rgba(60, 213, 255, 0.5), rgba(60, 213, 255, 0.3))\"}},[_c('a-row',{attrs:{\"gutter\":16}},[_c('a-col',{staticClass:\"gutter-row\",staticStyle:{\"padding-left\":\"20px\"},attrs:{\"span\":14}},[_c('div',{staticClass:\"gutter-box\"},[_c('span',[_vm._v(\"ID : \"),_c('a-input',{staticStyle:{\"width\":\"100px\"},attrs:{\"placeholder\":\"eg. 1001\",\"size\":\"small\",\"allowClear\":\"\"},model:{value:(_vm.dataFilter.id),callback:function ($$v) {_vm.$set(_vm.dataFilter, \"id\", $$v)},expression:\"dataFilter.id\"}})],1),_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(\"状态 : \"),_c('a-select',{staticStyle:{\"width\":\"100px\"},attrs:{\"size\":\"small\",\"allowClear\":\"\"},on:{\"change\":_vm.getDataList},model:{value:(_vm.dataFilter.status),callback:function ($$v) {_vm.$set(_vm.dataFilter, \"status\", $$v)},expression:\"dataFilter.status\"}},_vm._l((_vm.helper.instStatusList),function(item,index){return _c('a-select-option',{key:index,attrs:{\"value\":item.value}},[_vm._v(\" \"+_vm._s(item.desc)+\" \")])}),1)],1)])]),_c('a-col',{staticClass:\"gutter-row\",attrs:{\"span\":10,\"align\":\"right\"}},[_c('div',{staticClass:\"gutter-box\"},[_c('a-tooltip',{attrs:{\"title\":\"周期刷新\"}},[_c('a-switch',{attrs:{\"checked-children\":\"开\",\"un-checked-children\":\"关\"},on:{\"change\":_vm.handleDataListFlush},model:{value:(_vm.helper.isAutoFlush),callback:function ($$v) {_vm.$set(_vm.helper, \"isAutoFlush\", $$v)},expression:\"helper.isAutoFlush\"}})],1),_c('a-button',{staticClass:\"filter-tool\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.onQuery}},[_vm._v(\"查询\")]),_c('a-button',{staticClass:\"filter-tool\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.onGoBack}},[_vm._v(\"返回\")])],1)])],1)],1),_c('div',[_c('a-table',{attrs:{\"columns\":_vm.dataColumnList,\"data-source\":_vm.dataList,\"rowKey\":function (item) { return item.id; },\"loading\":_vm.isLoading,\"pagination\":false,\"scroll\":{ x: 1920 }},scopedSlots:_vm._u([{key:\"jobName\",fn:function(current, row){return _c('span',{},[_vm._v(\" \"+_vm._s(row.job.name)+\" \")])}},{key:\"jobType\",fn:function(current, row){return _c('span',{},[_vm._v(\" \"+_vm._s(row.job.typeDesc)+\" \")])}},{key:\"appId\",fn:function(current, row){return _c('span',{},[_c('a',{attrs:{\"href\":row.uiAddress,\"target\":\"_blank\"}},[_vm._v(_vm._s(current))])])}},{key:\"statusDesc\",fn:function(current, row){return _c('span',{},[_c('span',{style:({ color: [3, 4, -1].includes(row.status) ? 'red' : 'green' })},[_vm._v(_vm._s(current))])])}},{key:\"action\",fn:function(row){return _c('span',{},[_c('a',{on:{\"click\":function($event){return _vm.onLog(row)}}},[_vm._v(\"启动日志\")])])}}])})],1),_c('div',{staticStyle:{\"margin-top\":\"10px\",\"padding\":\"5px\",\"background-image\":\"linear-gradient(100deg, rgba(60,213,255,0.30), rgba(60,213,255,0.20))\"}},[_c('row',[_c('a-row',{attrs:{\"gutter\":16}},[_c('a-col',{staticClass:\"gutter-row\",attrs:{\"span\":12}},[_c('div',{staticClass:\"gutter-box\"},[_c('span',{staticStyle:{\"font-size\":\"16px\"}},[_vm._v(\"周期刷新 : \")]),_c('a-switch',{attrs:{\"checked-children\":\"开\",\"un-checked-children\":\"关\"},on:{\"change\":_vm.handleDataListFlush},model:{value:(_vm.helper.isAutoFlush),callback:function ($$v) {_vm.$set(_vm.helper, \"isAutoFlush\", $$v)},expression:\"helper.isAutoFlush\"}})],1)]),_c('a-col',{staticClass:\"gutter-row\",attrs:{\"span\":12,\"align\":\"right\"}},[_c('div',{staticClass:\"gutter-box\"},[_c('a-pagination',{attrs:{\"size\":\"small\",\"pageSizeOptions\":['1', '2', '10', '20', '30', '40', '50', '100', '500', '1000'],\"total\":_vm.page.total,\"show-total\":function (total, range) { return (\"第 \" + (range[0]) + \" ~ \" + (range[1]) + \" 项，共 \" + (_vm.page.total) + \" 项\"); },\"show-size-changer\":\"\",\"show-quick-jumper\":\"\"},on:{\"change\":_vm.onPageNumChange,\"showSizeChange\":_vm.onPageSizeChange}})],1)])],1)],1)],1),_c('a-modal',{attrs:{\"title\":\"实例日志\",\"width\":_vm.helper.clientWidth * 0.8},on:{\"ok\":_vm.handleInstLogModalOk,\"cancel\":_vm.handleInstLogModalCancel},model:{value:(_vm.instLog.isVisible),callback:function ($$v) {_vm.$set(_vm.instLog, \"isVisible\", $$v)},expression:\"instLog.isVisible\"}},[_c('SqlCMEditor',{attrs:{\"read-only\":true,\"auto-scroll-to-bottom-on-changes\":true},model:{value:(_vm.instLog.data),callback:function ($$v) {_vm.$set(_vm.instLog, \"data\", $$v)},expression:\"instLog.data\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- Data Filter -->\n    <div style=\"margin-bottom: 10px; padding: 5px; background-image: linear-gradient(100deg, rgba(60, 213, 255, 0.5), rgba(60, 213, 255, 0.3));\">\n      <a-row :gutter=\"16\">\n        <a-col class=\"gutter-row\" :span=\"14\" style=\"padding-left: 20px\">\n          <div class=\"gutter-box\">\n            <span\n              >ID :\n              <a-input v-model=\"dataFilter.id\" placeholder=\"eg. 1001\" style=\"width: 100px\" size=\"small\" allowClear />\n            </span>\n            <!--<span style=\"margin-left: 10px\"\n              >名称 :\n              <a-input v-model=\"dataFilter.name\" placeholder=\"eg. 测试作业\" style=\"width: 200px\" size=\"small\" allowClear />\n            </span>-->\n            <!--<span style=\"margin-left: 10px\"\n              >类型 :\n              <a-select v-model=\"dataFilter.type\" style=\"width: 100px\" size=\"small\" allowClear>\n                <a-select-option v-for=\"(item, index) in helper.jobTypeList\" :key=\"index\" :value=\"item.value\">\n                  {{ item.desc }}\n                </a-select-option>\n              </a-select>\n            </span>-->\n            <span style=\"margin-left: 10px\"\n              >状态 :\n              <a-select v-model=\"dataFilter.status\" style=\"width: 100px\" size=\"small\" allowClear @change=\"getDataList\">\n                <a-select-option v-for=\"(item, index) in helper.instStatusList\" :key=\"index\" :value=\"item.value\">\n                  {{ item.desc }}\n                </a-select-option>\n              </a-select>\n            </span>\n          </div>\n        </a-col>\n        <a-col class=\"gutter-row\" :span=\"10\" align=\"right\">\n          <div class=\"gutter-box\">\n            <a-tooltip title=\"周期刷新\">\n              <a-switch checked-children=\"开\" un-checked-children=\"关\" v-model=\"helper.isAutoFlush\" @change=\"handleDataListFlush\" />\n            </a-tooltip>\n            <a-button type=\"primary\" size=\"small\" class=\"filter-tool\" @click=\"onQuery\">查询</a-button>\n            <a-button type=\"primary\" size=\"small\" class=\"filter-tool\" @click=\"onGoBack\">返回</a-button>\n          </div>\n        </a-col>\n      </a-row>\n    </div>\n\n    <!-- Data Table List -->\n    <div>\n      <a-table :columns=\"dataColumnList\" :data-source=\"dataList\" :rowKey=\"item => item.id\" :loading=\"isLoading\" :pagination=\"false\" :scroll=\"{ x: 1920 }\">\n        <span slot=\"jobName\" slot-scope=\"current, row\">\n          {{ row.job.name }}\n        </span>\n        <span slot=\"jobType\" slot-scope=\"current, row\">\n          {{ row.job.typeDesc }}\n        </span>\n        <span slot=\"appId\" slot-scope=\"current, row\">\n          <a :href=\"row.uiAddress\" target=\"_blank\">{{ current }}</a>\n        </span>\n        <span slot=\"statusDesc\" slot-scope=\"current, row\">\n          <span :style=\"{ color: [3, 4, -1].includes(row.status) ? 'red' : 'green' }\">{{ current }}</span>\n        </span>\n        <span slot=\"action\" slot-scope=\"row\">\n          <a @click=\"onLog(row)\">启动日志</a>\n        </span>\n      </a-table>\n    </div>\n\n    <!-- Bottom Tool -->\n    <!-- Tools -->\n    <div style=\"margin-top: 10px; padding: 5px; background-image: linear-gradient(100deg, rgba(60,213,255,0.30), rgba(60,213,255,0.20));\">\n      <row>\n        <a-row :gutter=\"16\">\n          <a-col class=\"gutter-row\" :span=\"12\">\n            <div class=\"gutter-box\">\n              <span style=\"font-size: 16px\">周期刷新 : </span>\n              <a-switch checked-children=\"开\" un-checked-children=\"关\" v-model=\"helper.isAutoFlush\" @change=\"handleDataListFlush\" />\n            </div>\n          </a-col>\n          <a-col class=\"gutter-row\" :span=\"12\" align=\"right\">\n            <div class=\"gutter-box\">\n              <a-pagination\n                size=\"small\"\n                :pageSizeOptions=\"['1', '2', '10', '20', '30', '40', '50', '100', '500', '1000']\"\n                :total=\"page.total\"\n                :show-total=\"(total, range) => `第 ${range[0]} ~ ${range[1]} 项，共 ${page.total} 项`\"\n                show-size-changer\n                show-quick-jumper\n                @change=\"onPageNumChange\"\n                @showSizeChange=\"onPageSizeChange\"\n              />\n            </div>\n          </a-col>\n        </a-row>\n      </row>\n    </div>\n\n    <!-- 实例日志的对话框 -->\n    <a-modal v-model=\"instLog.isVisible\" title=\"实例日志\" @ok=\"handleInstLogModalOk\" @cancel=\"handleInstLogModalCancel\" :width=\"helper.clientWidth * 0.8\">\n      <!--      <a-textarea v-model=\"instLog.data\" autoSize=\"auto\" />-->\n      <SqlCMEditor v-model=\"instLog.data\" :read-only=\"true\" :auto-scroll-to-bottom-on-changes=\"true\" />\n    </a-modal>\n  </div>\n</template>\n<script>\nimport * as instApi from \"@/api/inst\";\nimport * as helperApi from \"@/api/helper\";\nimport * as utils from \"@/utils/utils\";\nimport SqlCMEditor from \"@/components/SqlCMEditor\";\nexport default {\n  components: {\n    SqlCMEditor\n  },\n  name: \"InstList\",\n  props: {\n    jobId: {\n      default: null\n    },\n    isAutoFlush: {\n      default: false\n    }\n  },\n  data() {\n    return {\n      // DataFilter\n      dataFilter: {\n        id: null,\n        jobId: this.jobId,\n        status: \"\",\n        pageNum: 1,\n        pageSize: 10\n      },\n\n      // Data Table List\n      dataColumnList: [\n        {\n          title: \"ID\",\n          dataIndex: \"id\",\n          width: 80\n        },\n        {\n          title: \"名称\",\n          width: 200,\n          scopedSlots: { customRender: \"jobName\" }\n        },\n        {\n          title: \"类型\",\n          width: 100,\n          scopedSlots: { customRender: \"jobType\" }\n        },\n        {\n          title: \"创建时间\",\n          dataIndex: \"createTime\",\n          width: 170\n        },\n        {\n          title: \"开始时间\",\n          dataIndex: \"startTime\",\n          width: 170\n        },\n        {\n          title: \"结束时间\",\n          dataIndex: \"stopTime\",\n          width: 170\n        },\n        {\n          title: \"Flink UI\",\n          dataIndex: \"appId\",\n          width: 280,\n          scopedSlots: { customRender: \"appId\" }\n        },\n        {\n          title: \"状态\",\n          dataIndex: \"statusDesc\",\n          width: 100,\n          align: \"center\",\n          fixed: \"right\",\n          scopedSlots: { customRender: \"statusDesc\" }\n        },\n        {\n          title: \"操作\",\n          width: 130,\n          align: \"center\",\n          fixed: \"right\",\n          scopedSlots: { customRender: \"action\" }\n        }\n      ],\n      dataList: [],\n      dataTableSelectedRowKeys: [],\n      isLoading: false,\n\n      instLog: {\n        isVisible: false,\n        data: \"\",\n        timer: null\n      },\n\n      // Bottom Tool\n      page: {\n        total: 0\n      },\n      dataListTimer: null,\n\n      // helper\n      helper: {\n        jobTypeList: [],\n        instStatusList: [],\n        isAutoFlush: this.isAutoFlush,\n        clientWidth: document.documentElement.clientWidth\n      }\n    };\n  },\n  methods: {\n    onQuery() {\n      this.getDataList();\n    },\n    onEdit() {\n      //\n    },\n    onGoBack() {\n      this.$router.go(-1);\n    },\n    onDataTableSelectedChange(selectedRowKeys) {\n      this.dataTableSelectedRowKeys = selectedRowKeys;\n    },\n    // eslint-disable-next-line no-unused-vars\n    onPageNumChange(pageNum, pageSize) {\n      this.dataFilter.pageNum = pageNum;\n      this.getDataList();\n    },\n    onPageSizeChange(pageNum, pageSize) {\n      this.dataFilter.pageNum = pageNum;\n      this.dataFilter.pageSize = pageSize;\n      this.getDataList();\n    },\n    getDataList() {\n      instApi.getInstPageList(utils.objectDeleteBlankVK(this.dataFilter)).then(resp => {\n        this.dataList = resp.data.list;\n        this.page.total = resp.data.total;\n\n        // 获取实例列表中最新的实例，不是最终状态就开启周期刷新，否则关闭\n        let lastInst = this.dataList[0];\n        if (lastInst) {\n          // 3:启动失败，4:运行失败，5:已停止，6:运行成功\n          if ([3, 4, 5, 6].includes(lastInst.status)) {\n            // 关闭刷新\n            this.handleDataListFlush(false);\n          } else {\n            // 开启刷新\n            this.helper.isAutoFlush = true;\n            this.handleDataListFlush(true);\n          }\n        }\n      });\n    },\n    handleInstLogModalOk() {\n      this.instLog.isVisible = false;\n      this.clearInstLogTimer();\n    },\n    handleInstLogModalCancel() {\n      this.clearInstLogTimer();\n    },\n    /* 定时器自动刷新 */\n    handleDataListFlush(checked) {\n      if (checked) {\n        if (!this.dataListTimer) {\n          this.dataListTimer = this.getDataListTimer();\n        }\n      } else {\n        this.clearDataListTimer();\n      }\n    },\n    getDataListTimer() {\n      return setInterval(() => {\n        this.getDataList();\n      }, 1000);\n    },\n    clearDataListTimer() {\n      clearInterval(this.dataListTimer);\n      this.dataListTimer = null;\n      this.helper.isAutoFlush = false;\n    },\n    handleInstLogFlush(checked, row) {\n      if (checked) {\n        if (!this.instLog.timer) {\n          this.instLog.timer = this.getInstLogTimer(row);\n        }\n      } else {\n        this.clearInstLogTimer();\n      }\n    },\n    getInstLogTimer(row) {\n      return setInterval(() => {\n        this.getInstLog(row);\n      }, 1000);\n    },\n    clearInstLogTimer() {\n      clearInterval(this.instLog.timer);\n      this.instLog.timer = null;\n    },\n    getInstLog(row) {\n      instApi.getInstLog(row.id).then(resp => {\n        this.instLog.data = resp.data;\n      });\n    },\n    /* Helper */\n    initHelper() {\n      helperApi.getJobTypeList().then(resp => {\n        this.helper.jobTypeList = resp.data;\n      });\n      helperApi.getInstStatusList().then(resp => {\n        this.helper.instStatusList = resp.data;\n      });\n    },\n    onLog(row) {\n      this.instLog.data = \"\";\n      this.instLog.isVisible = true;\n\n      // 周期刷新\n      this.handleInstLogFlush(true, row);\n    }\n  },\n  beforeDestroy() {\n    this.clearDataListTimer();\n    this.clearInstLogTimer();\n  },\n  created() {\n    this.initHelper();\n    this.getDataList();\n  }\n};\n</script>\n<style scoped>\n.filter-tool {\n  margin-left: 5px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=92614eda&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=92614eda&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"92614eda\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=92614eda&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=92614eda&scoped=true&lang=css&\""],"sourceRoot":""}