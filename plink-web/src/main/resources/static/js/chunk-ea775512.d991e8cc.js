(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea775512","chunk-2d0d7a0b","chunk-2d0d78d4"],{"131d":function(t,e,a){"use strict";var o=a("bf5d"),i=a.n(o);i.a},"3ec8":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px",padding:"5px","background-image":"linear-gradient(100deg, rgba(60, 213, 255, 0.5), rgba(60, 213, 255, 0.3))"}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",staticStyle:{"padding-left":"20px"},attrs:{span:20}},[a("div",{staticClass:"gutter-box"},[a("span",[t._v("ID : "),a("a-input",{staticStyle:{width:"100px"},attrs:{placeholder:"eg. 1001",size:"small",allowClear:""},model:{value:t.dataFilter.id,callback:function(e){t.$set(t.dataFilter,"id",e)},expression:"dataFilter.id"}})],1),a("span",{staticStyle:{"margin-left":"10px"}},[t._v("名称 : "),a("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"eg. 测试作业",size:"small",allowClear:""},model:{value:t.dataFilter.name,callback:function(e){t.$set(t.dataFilter,"name",e)},expression:"dataFilter.name"}})],1),a("span",{staticStyle:{"margin-left":"10px"}},[t._v("类型 : "),a("a-select",{staticStyle:{width:"100px"},attrs:{size:"small",allowClear:""},on:{change:t.getDataList},model:{value:t.dataFilter.type,callback:function(e){t.$set(t.dataFilter,"type",e)},expression:"dataFilter.type"}},t._l(t.helper.jobTypeList,(function(e,o){return a("a-select-option",{key:o,attrs:{value:e.value}},[t._v(" "+t._s(e.desc)+" ")])})),1)],1),a("span",{staticStyle:{"margin-left":"10px"}},[t._v("状态 : "),a("a-select",{staticStyle:{width:"100px"},attrs:{size:"small",allowClear:""},on:{change:t.getDataList},model:{value:t.dataFilter.lastStatus,callback:function(e){t.$set(t.dataFilter,"lastStatus",e)},expression:"dataFilter.lastStatus"}},t._l(t.helper.instStatusList,(function(e,o){return a("a-select-option",{key:o,attrs:{value:e.value}},[t._v(" "+t._s(e.desc)+" ")])})),1)],1)])]),a("a-col",{staticClass:"gutter-row",attrs:{span:4,align:"right"}},[a("div",{staticClass:"gutter-box"},[a("a-button",{staticClass:"filter-tool",attrs:{type:"primary",size:"small"},on:{click:t.onQuery}},[t._v("查询")]),a("a-button",{staticClass:"filter-tool",attrs:{type:"primary",size:"small"},on:{click:t.onAdd}},[t._v("新建")]),a("a-button",{staticClass:"filter-tool",attrs:{type:"primary",size:"small"},on:{click:t.onGoBack}},[t._v("返回")])],1)])],1)],1),a("div",[a("a-table",{attrs:{columns:t.dataColumns,"data-source":t.dataList,rowKey:function(t){return t.id},loading:t.isLoading,pagination:!1,scroll:{x:1920},"row-selection":{selectedRowKeys:t.dataTableSelectedRowKeys,onChange:t.onDataTableSelectedChange}},scopedSlots:t._u([{key:"name",fn:function(e,o){return a("span",{},[a("router-link",{attrs:{to:{path:"/page/job/jobDetail",query:{type:o.type,jobId:o.id}}}},[t._v(t._s(e))])],1)}},{key:"lastStatusDesc",fn:function(e,o){return a("span",{},[a("span",{style:{color:[3,4,-1].includes(o.lastStatus)?"red":"green"}},[t._v(t._s(e))])])}},{key:"action",fn:function(e){return a("span",{},[a("router-link",{attrs:{to:{path:"/page/job/JobDetail",query:{type:e.type,jobId:e.id}}}},[t._v("详情")]),a("a-divider",{attrs:{type:"vertical"}}),a("router-link",{attrs:{to:{path:"/page/job/JobEdit",query:{type:e.type,jobId:e.id}}},on:{click:function(a){return t.onEdit(e)}}},[t._v("编辑")])],1)}}])})],1),a("div",{staticStyle:{"margin-top":"10px",padding:"5px","background-image":"linear-gradient(100deg, rgba(60,213,255,0.30), rgba(60,213,255,0.20))"}},[a("row",[a("a-row",{attrs:{gutter:16}},[a("a-col",{staticClass:"gutter-row",attrs:{span:12}},[a("div",{staticClass:"gutter-box"},[a("a-button",{staticClass:"filter-tool",attrs:{type:"primary",size:"small",disabled:t.helper.isDisabledStartJobListButton},on:{click:t.onStartJobList}},[t._v("启动")]),a("a-button",{staticClass:"filter-tool",attrs:{type:"danger",size:"small",disabled:t.helper.isDisabledRestartJobListButton},on:{click:t.onRestartJobList}},[t._v("重启")]),a("a-button",{staticClass:"filter-tool",attrs:{type:"primary",size:"small",disabled:t.helper.isDisabledStopJobListButton},on:{click:t.onStopJobList}},[t._v("停止")]),a("a-button",{staticClass:"filter-tool",attrs:{type:"primary",size:"small",disabled:t.helper.isDisabledDeleteJobListButton},on:{click:t.onDeleteJobList}},[t._v("删除")])],1)]),a("a-col",{staticClass:"gutter-row",attrs:{span:12,align:"right"}},[a("div",{staticClass:"gutter-box"},[a("a-pagination",{attrs:{size:"small",pageSizeOptions:["1","2","10","20","30","40","50","100","500","1000"],total:t.page.total,"show-total":function(e,a){return"第 "+a[0]+" ~ "+a[1]+" 项，共 "+t.page.total+" 项"},"show-size-changer":"","show-quick-jumper":""},on:{change:t.onPageNumChange,showSizeChange:t.onPageSizeChange}})],1)])],1)],1)],1),a("div",[a("a-modal",{attrs:{title:"新建作业","ok-text":"确认","cancel-text":"取消"},on:{ok:t.onJobAddModalOk},model:{value:t.jobAddModal.isVisible,callback:function(e){t.$set(t.jobAddModal,"isVisible",e)},expression:"jobAddModal.isVisible"}},[a("a-form-model",{ref:"ruleForm",attrs:{model:t.jobAddModal.data,rules:t.jobAddModal.rules,"label-col":t.jobAddModal.labelCol,"wrapper-col":t.jobAddModal.wrapperCol}},[a("a-form-model-item",{attrs:{label:"作业名称",prop:"name"}},[a("a-input",{model:{value:t.jobAddModal.data.name,callback:function(e){t.$set(t.jobAddModal.data,"name",e)},expression:"jobAddModal.data.name"}})],1),a("a-form-model-item",{attrs:{label:"作业类型",prop:"type"}},[a("a-select",{model:{value:t.jobAddModal.data.type,callback:function(e){t.$set(t.jobAddModal.data,"type",e)},expression:"jobAddModal.data.type"}},t._l(t.helper.jobTypeList,(function(e,o){return a("a-select-option",{key:o,attrs:{value:e.value,disabled:!e.enable}},[t._v(" "+t._s(e.desc)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"作业描述"}},[a("a-textarea",{model:{value:t.jobAddModal.data.description,callback:function(e){t.$set(t.jobAddModal.data,"description",e)},expression:"jobAddModal.data.description"}})],1)],1)],1)],1)])},i=[],n=(a("4160"),a("159b"),a("76fe")),s=a("782f"),l=a("fa7d"),r={name:"JobList",data:function(){return{dataFilter:{id:null,name:"",type:"",lastStatus:"",pageNum:1,pageSize:10},dataColumns:[{key:"id",title:"ID",dataIndex:"id",width:80},{title:"名称",dataIndex:"name",width:200,scopedSlots:{customRender:"name"}},{title:"类型",dataIndex:"typeDesc",width:100},{title:"开始时间",dataIndex:"createTime",width:170},{title:"结束时间",dataIndex:"updateTime",width:170},{title:"Flink UI",dataIndex:"lastAppId",width:280},{title:"状态",dataIndex:"lastStatusDesc",width:100,align:"center",fixed:"right",scopedSlots:{customRender:"lastStatusDesc"}},{title:"操作",width:130,align:"center",fixed:"right",scopedSlots:{customRender:"action"}}],dataList:[],dataTableSelectedRowKeys:[],isLoading:!1,page:{total:0},helper:{jobTypeList:[],instStatusList:[],isDisabledStartJobListButton:!0,isDisabledRestartJobListButton:!0,isDisabledStopJobListButton:!0,isDisabledDeleteJobListButton:!0},jobAddModal:{isVisible:!1,labelCol:{span:4},wrapperCol:{span:12},data:{name:"",type:1,description:""},rules:{name:[{required:!0,message:"请输入作业名！",trigger:"blur"}]}}}},methods:{onQuery:function(){this.getDataList()},onAdd:function(){this.jobAddModal.isVisible=!0},onJobAddModalOk:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return t.$message.error("请检查必填项！！！"),!1;n["addJob"](t.jobAddModal.data).then((function(e){t.$router.push({path:"/page/job/jobEdit",query:{type:e.data.type,jobId:e.data.id}}),t.$Notice.success({title:"新建作业成功！"})}))}))},onEdit:function(t){this.$router.push({path:"/page/job/jobEdit",query:{jobId:t.id}})},onGoBack:function(){this.$router.go(-1)},onDataTableSelectedChange:function(t,e){if(this.dataTableSelectedRowKeys=t,0===t.length)return this.helper.isDisabledStartJobListButton=!0,this.helper.isDisabledRestartJobListButton=!0,this.helper.isDisabledStopJobListButton=!0,void(this.helper.isDisabledDeleteJobListButton=!0);var a=!0,o=!0,i=!0,n=!0;e.forEach((function(t){a=a&&t.authMap.start,o=o&&t.authMap.restart,i=i&&t.authMap.stop,n=n&&t.authMap.delete})),this.helper.isDisabledStartJobListButton=!a,this.helper.isDisabledRestartJobListButton=!o,this.helper.isDisabledStopJobListButton=!i,this.helper.isDisabledDeleteJobListButton=!n},onPageNumChange:function(t,e){this.dataFilter.pageNum=t,this.getDataList()},onPageSizeChange:function(t,e){this.dataFilter.pageNum=t,this.dataFilter.pageSize=e,this.getDataList()},getDataList:function(){var t=this;this.isLoading=!0,n["getJobPageList"](l["objectDeleteBlankVK"](this.dataFilter)).then((function(e){t.dataList=e.data.list,t.page.total=e.data.total,t.isLoading=!1}))},onStartJobList:function(){var t=this;n["startJobList"](this.dataTableSelectedRowKeys).then((function(){t.$Notice.success({title:"启动多个作业成功！",duration:1}),t.getDataList()}))},onRestartJobList:function(){var t=this;n["restartJobList"](this.dataTableSelectedRowKeys).then((function(){t.$Notice.success({title:"重启多个作业成功！",duration:1}),t.getDataList()}))},onStopJobList:function(){var t=this;n["stopJobList"](this.dataTableSelectedRowKeys).then((function(){t.$Notice.success({title:"停止多个作业成功！",duration:1}),t.getDataList()}))},onDeleteJobList:function(){var t=this;n["deleteJobList"](this.dataTableSelectedRowKeys).then((function(){t.getDataList(),t.$Notice.success({title:"删除多个作业成功！",duration:1}),t.getDataList()}))},initHelper:function(){var t=this;s["getJobTypeList"]().then((function(e){t.helper.jobTypeList=e.data})),s["getInstStatusList"]().then((function(e){t.helper.instStatusList=e.data}))}},created:function(){this.initHelper(),this.getDataList()}},d=r,u=(a("131d"),a("2877")),c=Object(u["a"])(d,o,i,!1,null,"f1b03fce",null);e["default"]=c.exports},"76fe":function(t,e,a){"use strict";a.r(e),a.d(e,"UPLOAD_JAR_URL",(function(){return i})),a.d(e,"getJobPageList",(function(){return n})),a.d(e,"addJob",(function(){return s})),a.d(e,"getJob",(function(){return l})),a.d(e,"updateJob",(function(){return r})),a.d(e,"deleteJob",(function(){return d})),a.d(e,"deleteJobList",(function(){return u})),a.d(e,"getJobJarList",(function(){return c})),a.d(e,"startJob",(function(){return b})),a.d(e,"startJobList",(function(){return p})),a.d(e,"restartJob",(function(){return f})),a.d(e,"restartJobList",(function(){return g})),a.d(e,"stopJob",(function(){return h})),a.d(e,"stopJobList",(function(){return m})),a.d(e,"getJobStateInfoList",(function(){return j}));a("ac1f"),a("5319");var o=a("b775"),i="/mng/job/{jobId}/uploadJar";function n(t){return Object(o["default"])({url:"/mng/job/queryJobs",method:"get",params:t})}function s(t){return Object(o["default"])({url:"/mng/job/addJob",method:"post",data:t})}function l(t){return Object(o["default"])({url:"/mng/job/queryJob/"+t,method:"get"})}function r(t){return Object(o["default"])({url:"/mng/job/updateJob",method:"post",data:t})}function d(t){return Object(o["default"])({url:"/mng/job/deleteJob/"+t,method:"post"})}function u(t){return Object(o["default"])({url:"/mng/job/deleteJobs",method:"post",data:t})}function c(t){return Object(o["default"])({url:"/mng/job/{jobId}/jarList".replace("{jobId}",t),method:"get"})}function b(t){return Object(o["default"])({url:"/mng/job/startJob/{jobId}".replace("{jobId}",t),method:"get"})}function p(t){return Object(o["default"])({url:"/mng/job/startJobs",method:"post",data:t})}function f(t){return Object(o["default"])({url:"/mng/job/reStartJob/{jobId}".replace("{jobId}",t),method:"get"})}function g(t){return Object(o["default"])({url:"/mng/job/reStartJobs",method:"post",data:t})}function h(t){return Object(o["default"])({url:"/mng/job/stopJob/{jobId}".replace("{jobId}",t),method:"get"})}function m(t){return Object(o["default"])({url:"/mng/job/stopJobs",method:"post",data:t})}function j(t){return Object(o["default"])({url:"/mng/jobStateInfo/queryJobStateInfos",method:"get",params:t})}},"782f":function(t,e,a){"use strict";a.r(e),a.d(e,"getInstStatusList",(function(){return i})),a.d(e,"getJobTypeList",(function(){return n})),a.d(e,"getJobClientVersionList",(function(){return s})),a.d(e,"getJobStateInfoType",(function(){return l})),a.d(e,"getDefaultFlinkConfs",(function(){return r}));var o=a("b775");function i(){return Object(o["default"])({url:"/mng/enum/jobInstanceStatus",method:"get"})}function n(){return Object(o["default"])({url:"/mng/enum/jobType",method:"get"})}function s(){return Object(o["default"])({url:"/mng/enum/jobClientVersion",method:"get"})}function l(){return Object(o["default"])({url:"/mng/enum/jobStateInfoType",method:"get"})}function r(){return Object(o["default"])({url:"/mng/util/defaultFlinkConfs",method:"get"})}},bf5d:function(t,e,a){}}]);
//# sourceMappingURL=chunk-ea775512.d991e8cc.js.map